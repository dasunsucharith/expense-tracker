<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Savings - Expense Tracker</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <!-- Navigation -->
        {% include 'navbar.html' %}

        <!-- Main Content -->
        <div class="container-fluid mt-4" id="savings-page">
            <!-- Hero Section -->
            <div class="page-hero slide-in-up">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h2><i class="fas fa-piggy-bank me-3 coin-flip"></i>Savings Management</h2>
                        <p class="mb-3 fs-5">Build your financial future with smart savings tracking</p>
                        <div class="hero-stats">
                            <div class="hero-stat">
                                <span class="hero-stat-value" id="hero-total">
                                    <span class="currency-symbol">$</span>0.00
                                </span>
                                <span class="hero-stat-label">Total Savings</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-value" id="hero-count">0</span>
                                <span class="hero-stat-label">Transactions</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-value" id="hero-average">
                                    <span class="currency-symbol">$</span>0.00
                                </span>
                                <span class="hero-stat-label">Average</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-value" id="hero-last-date">-</span>
                                <span class="hero-stat-label">Last Entry</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 text-end">
                        <button class="btn btn-light btn-lg quick-add-btn" data-bs-toggle="modal" data-bs-target="#addSavingModal">
                            <i class="fas fa-plus me-2"></i>Add Saving
                        </button>
                    </div>
                </div>
            </div>

            <!-- Savings Goals Progress -->
            <div class="savings-goals slide-in-up">
                <h5 class="mb-3">
                    <i class="fas fa-target me-2 text-primary"></i>Savings Goals & Progress
                </h5>
                <div class="row">
                    <div class="col-lg-4 col-md-6 mb-3">
                        <div class="goal-item">
                            <div class="d-flex align-items-center">
                                <div class="goal-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="ms-3">
                                    <h6 class="mb-0">Emergency Fund</h6>
                                    <small class="text-muted">Target: $10,000</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <div class="progress-bg">
                                    <div class="progress-bar-custom" style="width: 60%" id="emergency-progress"></div>
                                </div>
                                <small class="text-muted">60% Complete</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 mb-3">
                        <div class="goal-item">
                            <div class="d-flex align-items-center">
                                <div class="goal-icon">
                                    <i class="fas fa-car"></i>
                                </div>
                                <div class="ms-3">
                                    <h6 class="mb-0">New Car</h6>
                                    <small class="text-muted">Target: $25,000</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <div class="progress-bg">
                                    <div class="progress-bar-custom" style="width: 25%" id="car-progress"></div>
                                </div>
                                <small class="text-muted">25% Complete</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 mb-3">
                        <div class="goal-item">
                            <div class="d-flex align-items-center">
                                <div class="goal-icon">
                                    <i class="fas fa-plane"></i>
                                </div>
                                <div class="ms-3">
                                    <h6 class="mb-0">Vacation</h6>
                                    <small class="text-muted">Target: $5,000</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <div class="progress-bg">
                                    <div class="progress-bar-custom" style="width: 80%" id="vacation-progress"></div>
                                </div>
                                <small class="text-muted">80% Complete</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="filters-panel slide-in-up">
                <!-- Search Box -->
                <div class="search-box">
                    <input type="text" class="search-input" id="saving-search" placeholder="Search savings by description or amount...">
                    <i class="fas fa-search search-icon"></i>
                </div>

                <div class="row">
                    <div class="col-lg-4 col-md-6">
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-calendar-alt text-primary"></i>
                                Date Range
                            </label>
                            <select class="form-select filter-input" id="saving-date-filter">
                                <option value="this-month">üìÖ This Month</option>
                                <option value="last-month">üìÜ Last Month</option>
                                <option value="last-3-months">üìä Last 3 Months</option>
                                <option value="this-year">üóìÔ∏è This Year</option>
                                <option value="custom">‚öôÔ∏è Custom Range</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-sort-amount-up text-success"></i>
                                Amount Range
                            </label>
                            <select class="form-select filter-input" id="amount-range-filter">
                                <option value="">üí∞ All Amounts</option>
                                <option value="0-100">$0 - $100</option>
                                <option value="100-500">$100 - $500</option>
                                <option value="500-1000">$500 - $1,000</option>
                                <option value="1000+">$1,000+</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                        <div class="filter-group">
                            <label class="filter-label">&nbsp;</label>
                            <button class="btn btn-gradient w-100 filter-input" id="apply-saving-filters">
                                <i class="fas fa-filter me-2"></i>Apply Filters
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Custom Date Range -->
                <div class="row d-none" id="saving-custom-date-range">
                    <div class="col-md-6">
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-play text-success"></i>
                                Start Date
                            </label>
                            <input type="date" class="form-control filter-input" id="saving-start-date">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-stop text-danger"></i>
                                End Date
                            </label>
                            <input type="date" class="form-control filter-input" id="saving-end-date">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Savings Table -->
            <div class="savings-table-container slide-in-up">
                <div class="table-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <h5 class="table-title">
                            <i class="fas fa-list"></i>
                            Savings Records
                            <span class="badge bg-light text-dark ms-2" id="record-count">0 records</span>
                        </h5>
                        <div class="table-actions">
                            <button class="btn export-btn" onclick="exportSavings('csv')" title="Export as CSV">
                                <i class="fas fa-file-csv me-1"></i>CSV
                            </button>
                            <button class="btn export-btn" onclick="exportSavings('excel')" title="Export as Excel">
                                <i class="fas fa-file-excel me-1"></i>Excel
                            </button>
                            <button class="btn export-btn" onclick="exportSavings('pdf')" title="Export as PDF">
                                <i class="fas fa-file-pdf me-1"></i>PDF
                            </button>
                            <button class="btn export-btn" onclick="printSavings()" title="Print">
                                <i class="fas fa-print me-1"></i>Print
                            </button>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table advanced-table mb-0">
                        <thead>
                            <tr>
                                <th style="cursor: pointer" onclick="sortTable('date')">
                                    <i class="fas fa-calendar me-1"></i>Date
                                    <i class="fas fa-sort sort-icon" id="sort-date"></i>
                                </th>
                                <th><i class="fas fa-comment me-1"></i>Description</th>
                                <th style="cursor: pointer" onclick="sortTable('amount')">
                                    <i class="fas fa-piggy-bank me-1"></i>Amount
                                    <i class="fas fa-sort sort-icon" id="sort-amount"></i>
                                </th>
                                <th><i class="fas fa-cog me-1"></i>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="savings-table">
                            <!-- Savings will be loaded here -->
                        </tbody>
                    </table>

                    <!-- Empty State -->
                    <div id="empty-state" class="empty-state d-none">
                        <i class="fas fa-piggy-bank empty-state-icon"></i>
                        <h4>No Savings Records Found</h4>
                        <p>You haven't recorded any savings yet.<br>Start building your financial future today!</p>
                        <button class="btn quick-add-btn" data-bs-toggle="modal" data-bs-target="#addSavingModal">
                            <i class="fas fa-plus me-2"></i>Add Your First Saving
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Add Button -->
        <button class="floating-add-btn" data-bs-toggle="modal" data-bs-target="#addSavingModal" title="Add Saving">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Modals -->
        <!-- Add Saving Modal -->
        <div class="modal fade" id="addSavingModal" tabindex="-1" aria-labelledby="addSavingModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header" style="background: linear-gradient(135deg, var(--savings-primary), var(--savings-secondary)); color: white;">
                        <h5 class="modal-title" id="addSavingModalLabel">
                            <i class="fas fa-plus-circle me-2"></i>Add New Saving
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="add-saving-form">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="form-floating">
                                        <div class="input-group">
                                            <span class="input-group-text currency-symbol">$</span>
                                            <input type="number" class="form-control" id="saving-amount" step="0.01" min="0.01" placeholder="0.00" required>
                                            <label for="saving-amount">
                                                <i class="fas fa-dollar-sign me-1 text-success"></i>Amount *
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-text">Enter the amount you're saving</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="saving-date" required>
                                        <label for="saving-date">
                                            <i class="fas fa-calendar me-1 text-warning"></i>Date *
                                        </label>
                                    </div>
                                    <div class="form-text">When did you save this amount?</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="saving-description" placeholder="Enter saving description (optional)">
                                    <label for="saving-description">
                                        <i class="fas fa-comment me-1 text-secondary"></i>Description
                                    </label>
                                </div>
                                <div class="form-text">Add details about this saving (goal, purpose, etc.)</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">
                                    <i class="fas fa-bullseye me-1 text-info"></i>Savings Goal (Optional)
                                </label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <select class="form-select" id="saving-goal">
                                            <option value="">üéØ Select a goal</option>
                                            <option value="emergency">üè† Emergency Fund</option>
                                            <option value="vacation">‚úàÔ∏è Vacation</option>
                                            <option value="car">üöó New Car</option>
                                            <option value="house">üè° House Down Payment</option>
                                            <option value="retirement">üèñÔ∏è Retirement</option>
                                            <option value="education">üéì Education</option>
                                            <option value="other">üîß Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="number" class="form-control" id="goal-target" placeholder="Target amount" step="0.01" min="0">
                                    </div>
                                </div>
                                <div class="form-text">Link this saving to a specific goal</div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-1"></i>Cancel
                        </button>
                        <button type="button" class="btn btn-gradient" id="save-saving">
                            <i class="fas fa-save me-1"></i>Save Entry
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Saving Modal -->
        <div class="modal fade" id="editSavingModal" tabindex="-1" aria-labelledby="editSavingModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header bg-warning text-dark">
                        <h5 class="modal-title" id="editSavingModalLabel">
                            <i class="fas fa-edit me-2"></i>Edit Saving
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="edit-saving-form">
                            <input type="hidden" id="edit-saving-id">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="form-floating">
                                        <div class="input-group">
                                            <span class="input-group-text currency-symbol">$</span>
                                            <input type="number" class="form-control" id="edit-saving-amount" step="0.01" min="0.01" required>
                                            <label for="edit-saving-amount">
                                                <i class="fas fa-dollar-sign me-1 text-success"></i>Amount *
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="edit-saving-date" required>
                                        <label for="edit-saving-date">
                                            <i class="fas fa-calendar me-1 text-warning"></i>Date *
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="edit-saving-description">
                                    <label for="edit-saving-description">
                                        <i class="fas fa-comment me-1 text-secondary"></i>Description
                                    </label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-1"></i>Cancel
                        </button>
                        <button type="button" class="btn btn-danger me-auto" id="delete-saving">
                            <i class="fas fa-trash me-1"></i>Delete
                        </button>
                        <button type="button" class="btn btn-primary" id="update-saving">
                            <i class="fas fa-save me-1"></i>Update Saving
                        </button>
                    </div>
                </div>
            </div>
        </div>

    <!-- Loading Spinner Overlay -->
        <div id="loading-overlay" class="d-none"
            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; align-items: center; justify-content: center;">
            <div class="spinner-border text-light" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/app.js"></script>

    </body>
</html>